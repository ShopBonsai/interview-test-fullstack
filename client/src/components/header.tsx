import React, { FunctionComponent } from 'react';
import { GoogleLogout } from 'react-google-login';
import { navigate } from '@reach/router';
import { isLoggedInVar } from '../createApolloClient';
import { useQuery } from '@apollo/client';
import { IS_LOGGED_IN } from '../requireAuth';

const Header: FunctionComponent = () => {
    const {
        data: { isLoggedIn },
    } = useQuery(IS_LOGGED_IN);
    return (
        <div
            style={{
                margin: '0 auto',
                backgroundColor: 'white',
                position: 'fixed',
                height: '100px',
                width: '100vw',
                top: 0,
                zIndex: 1000,
                textAlign: 'center',
                color: 'black',
            }}
        >
            <a href="/">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="132.362"
                    height="75"
                    viewBox="0 0 132.362 30"
                >
                    <g
                        id="Group_131"
                        data-name="Group 131"
                        transform="translate(9541.267 -11331.283)"
                    >
                        <g
                            id="Group_130"
                            data-name="Group 130"
                            transform="translate(-9541.267 11331.283)"
                        >
                            <path
                                id="Path_90"
                                data-name="Path 90"
                                d="M-9541.266,11333.324h10.618q4.418,0,6.749,2.079a7.112,7.112,0,0,1,2.33,5.583,6.247,6.247,0,0,1-3.648,5.95v.083a6.718,6.718,0,0,1,3.223,2.2,6.537,6.537,0,0,1,1.358,4.321,7.474,7.474,0,0,1-2.7,6.094,10.763,10.763,0,0,1-7.072,2.222h-10.862Zm10.416,11.616a3.79,3.79,0,0,0,2.716-.855,3.237,3.237,0,0,0,.891-2.446,2.974,2.974,0,0,0-.932-2.363,3.94,3.94,0,0,0-2.675-.815h-4.581v6.48Zm.364,11.779a4.254,4.254,0,0,0,3.04-.936,3.3,3.3,0,0,0,.973-2.487,3.474,3.474,0,0,0-.973-2.589,4.131,4.131,0,0,0-3-.958h-4.985v6.97Z"
                                transform="translate(9541.266 -11332.428)"
                                fill="#000"
                            ></path>
                            <path
                                id="Path_91"
                                data-name="Path 91"
                                d="M-9484.479,11370.509a10.345,10.345,0,0,1-3.87-3.852,10.9,10.9,0,0,1-1.439-5.6,10.907,10.907,0,0,1,1.439-5.6,10.3,10.3,0,0,1,3.891-3.852,10.719,10.719,0,0,1,5.37-1.387,10.61,10.61,0,0,1,5.351,1.387,10.352,10.352,0,0,1,3.87,3.852,10.906,10.906,0,0,1,1.438,5.6,10.9,10.9,0,0,1-1.438,5.6,10.352,10.352,0,0,1-3.87,3.852,10.62,10.62,0,0,1-5.351,1.387A10.7,10.7,0,0,1-9484.479,11370.509Zm8.877-5.523a5.551,5.551,0,0,0,1.418-3.933,5.572,5.572,0,0,0-1.418-3.913,4.545,4.545,0,0,0-3.486-1.549,4.593,4.593,0,0,0-3.546,1.528,5.6,5.6,0,0,0-1.4,3.934,5.6,5.6,0,0,0,1.4,3.933,4.593,4.593,0,0,0,3.546,1.528A4.572,4.572,0,0,0-9475.6,11364.985Z"
                                transform="translate(9512.404 -11341.896)"
                                fill="#000"
                            ></path>
                            <path
                                id="Path_92"
                                data-name="Path 92"
                                d="M-9434.8,11350.78h4.7l.852,2.324a7.062,7.062,0,0,1,5.877-2.895,6.824,6.824,0,0,1,5.592,2.263q1.866,2.262,1.865,6.949v11.9h-5.756v-11.29q0-4.441-3.525-4.443a3.547,3.547,0,0,0-2.816,1.183,5.182,5.182,0,0,0-1.035,3.5v11.046h-5.754Z"
                                transform="translate(9481.575 -11341.896)"
                                fill="#000"
                            ></path>
                            <path
                                id="Path_93"
                                data-name="Path 93"
                                d="M-9382.47,11370.243a7.766,7.766,0,0,1-2.979-4.421l4.863-1.55a4.366,4.366,0,0,0,1.276,2.241,3.544,3.544,0,0,0,2.453.815,4.231,4.231,0,0,0,2.289-.529,1.654,1.654,0,0,0,.831-1.468,1.406,1.406,0,0,0-.811-1.243,7.833,7.833,0,0,0-2.512-.754,15.437,15.437,0,0,1-5.877-2.1,4.968,4.968,0,0,1-2.067-4.423,6.1,6.1,0,0,1,.933-3.24,6.555,6.555,0,0,1,2.776-2.446,9.873,9.873,0,0,1,4.438-.917,8.36,8.36,0,0,1,5.107,1.528,7.172,7.172,0,0,1,2.714,4.3l-4.741,1.345q-.69-2.607-3.04-2.609a3.906,3.906,0,0,0-2.107.49,1.426,1.426,0,0,0-.77,1.223,1.32,1.32,0,0,0,.83,1.2,12.014,12.014,0,0,0,2.817.835,13.086,13.086,0,0,1,5.694,2.2,5.3,5.3,0,0,1,1.925,4.443,6.048,6.048,0,0,1-.992,3.363,6.935,6.935,0,0,1-2.918,2.445,10.4,10.4,0,0,1-4.52.918A9.226,9.226,0,0,1-9382.47,11370.243Z"
                                transform="translate(9453.903 -11341.896)"
                                fill="#000"
                            ></path>
                            <path
                                id="Path_94"
                                data-name="Path 94"
                                d="M-9337.269,11370.509a10.047,10.047,0,0,1-3.647-3.872,11.442,11.442,0,0,1-1.358-5.584,11.585,11.585,0,0,1,1.338-5.584,9.966,9.966,0,0,1,3.607-3.872,9.378,9.378,0,0,1,4.985-1.387,8.127,8.127,0,0,1,3.607.754,6.5,6.5,0,0,1,2.351,1.814v-2h5.755v20.544h-4.741l-.771-2.282a7.372,7.372,0,0,1-2.371,1.977,7.537,7.537,0,0,1-3.749.877A9.487,9.487,0,0,1-9337.269,11370.509Zm9.464-5.421a5.836,5.836,0,0,0,1.419-4.035,5.82,5.82,0,0,0-1.419-4.056,4.65,4.65,0,0,0-3.606-1.57,4.737,4.737,0,0,0-3.628,1.61,5.713,5.713,0,0,0-1.479,4.016,5.69,5.69,0,0,0,1.479,4.035,4.764,4.764,0,0,0,3.628,1.589A4.621,4.621,0,0,0-9327.8,11365.088Z"
                                transform="translate(9429.696 -11341.896)"
                                fill="#000"
                            ></path>
                            <path
                                id="Path_95"
                                data-name="Path 95"
                                d="M-9284.258,11336.7a3.1,3.1,0,0,1-.912-2.242,3.067,3.067,0,0,1,.933-2.24,2.988,2.988,0,0,1,2.188-.937,3.1,3.1,0,0,1,2.249.938,3.034,3.034,0,0,1,.953,2.24,3.034,3.034,0,0,1-.953,2.242,3.1,3.1,0,0,1-2.249.938A2.965,2.965,0,0,1-9284.258,11336.7Zm-.628,3.465h5.756v20.544h-5.756Z"
                                transform="translate(9397.679 -11331.283)"
                                fill="#000"
                            ></path>
                        </g>
                        <path
                            id="Path_96"
                            data-name="Path 96"
                            d="M-9260.572,11333.418h3.451v.993h-1.193v3.49h-1.045v-3.49h-1.213Zm9.047,4.483h-1.043v-2.533l-1.064,2.5v.038h-.709l-1.043-2.439v2.439h-1.064v-4.483h1.156l1.306,3.038,1.306-3.038h1.156Z"
                            transform="translate(-157.379 -1.197)"
                            fill="#000"
                        ></path>
                    </g>
                </svg>
            </a>
            {isLoggedIn && (
                <div style={{ position: 'fixed', top: '20px', right: '20px' }}>
                    <GoogleLogout
                        clientId="1057747297021-a6jjec4ohpsjr4gnc523afpes0nuuup4.apps.googleusercontent.com"
                        buttonText="Logout"
                        onLogoutSuccess={() => {
                            localStorage.removeItem('token');
                            isLoggedInVar(false);
                            navigate('/login', { replace: true });
                        }}
                    ></GoogleLogout>
                </div>
            )}
        </div>
    );
};

export default Header;
